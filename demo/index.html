<!doctype html>
<html>

<head>
  <script src="../../webcomponentsjs/webcomponents-lite.js"></script>
  <link rel="import" href="../data-filter.html">
</head>

<body>
  <!-- <h3> Selecting Columns </h3> -->
  <!-- data='{"category": ["cat", "dig", "pol", "cat", "mon"], "numbers": [1,2,3,4,5], "boolean": [true, false, false, true, false]}' -->
  <!-- <data-filter 
      data='[{"id":1,"gender":"Male","category":"Lexus","eid":"89-7422134"},{"id":2,"gender":"Female","category":"Land Rover","eid":"13-0083923"},{"id":3,"gender":"Male","category":"Saturn","eid":"57-4260438"},{"id":4,"gender":"Female","category":"Maserati","eid":"58-8783926"},{"id":5,"gender":"Female","category":"Plymouth","eid":"67-5182853"},{"id":6,"gender":"Male","category":"Chevrolet","eid":"87-7992457"},{"id":7,"gender":"Male","category":"Volkswagen","eid":"12-7196317"},{"id":8,"gender":"Male","category":"Mazda","eid":"88-8362089"},{"id":9,"gender":"Male","category":"Chevrolet","eid":"90-6677452"},{"id":10,"gender":"Female","category":"Mitsubishi","eid":"25-3417784"},{"id":11,"gender":"Male","category":"Chevrolet","eid":"67-0378536"},{"id":12,"gender":"Male","category":"Oldsmobile","eid":"43-7106689"},{"id":13,"gender":"Male","category":"Mitsubishi","eid":"50-3635229"},{"id":14,"gender":"Female","category":"Saab","eid":"50-6486139"},{"id":15,"gender":"Male","category":"GMC","eid":"00-1033814"},{"id":16,"gender":"Female","category":"Pontiac","eid":"31-4515681"},{"id":17,"gender":"Female","category":"Toyota","eid":"84-9625877"},{"id":18,"gender":"Male","category":"MINI","eid":"67-6377480"},{"id":19,"gender":"Male","category":"GMC","eid":"57-3878062"},{"id":20,"gender":"Male","category":"Mazda","eid":"82-0952878"},{"id":21,"gender":"Female","category":"Honda","eid":"42-4265048"},{"id":22,"gender":"Male","category":"Oldsmobile","eid":"70-7808425"},{"id":23,"gender":"Male","category":"Acura","eid":"98-7681797"},{"id":24,"gender":"Male","category":"Lincoln","eid":"52-6658371"},{"id":25,"gender":"Male","category":"Mazda","eid":"26-5062883"}]'
      show-columns='["id", "gender"]'
    ></data-filter> -->

  <!-- <h3> All Columns </h3>

    <data-filter 
      data='[{"id":1,"gender":"Male","category":"Lexus","eid":"89-7422134"},{"id":2,"gender":"Female","category":"Land Rover","eid":"13-0083923"},{"id":3,"gender":"Male","category":"Saturn","eid":"57-4260438"},{"id":4,"gender":"Female","category":"Maserati","eid":"58-8783926"},{"id":5,"gender":"Female","category":"Plymouth","eid":"67-5182853"},{"id":6,"gender":"Male","category":"Chevrolet","eid":"87-7992457"},{"id":7,"gender":"Male","category":"Volkswagen","eid":"12-7196317"},{"id":8,"gender":"Male","category":"Mazda","eid":"88-8362089"},{"id":9,"gender":"Male","category":"Chevrolet","eid":"90-6677452"},{"id":10,"gender":"Female","category":"Mitsubishi","eid":"25-3417784"},{"id":11,"gender":"Male","category":"Chevrolet","eid":"67-0378536"},{"id":12,"gender":"Male","category":"Oldsmobile","eid":"43-7106689"},{"id":13,"gender":"Male","category":"Mitsubishi","eid":"50-3635229"},{"id":14,"gender":"Female","category":"Saab","eid":"50-6486139"},{"id":15,"gender":"Male","category":"GMC","eid":"00-1033814"},{"id":16,"gender":"Female","category":"Pontiac","eid":"31-4515681"},{"id":17,"gender":"Female","category":"Toyota","eid":"84-9625877"},{"id":18,"gender":"Male","category":"MINI","eid":"67-6377480"},{"id":19,"gender":"Male","category":"GMC","eid":"57-3878062"},{"id":20,"gender":"Male","category":"Mazda","eid":"82-0952878"},{"id":21,"gender":"Female","category":"Honda","eid":"42-4265048"},{"id":22,"gender":"Male","category":"Oldsmobile","eid":"70-7808425"},{"id":23,"gender":"Male","category":"Acura","eid":"98-7681797"},{"id":24,"gender":"Male","category":"Lincoln","eid":"52-6658371"},{"id":25,"gender":"Male","category":"Mazda","eid":"26-5062883"}]'
    ></data-filter> -->

  <h3>Using Metaviz dataset</h3>
  <div id="metaviz">

  </div>
  <script>
    window.addEventListener('WebComponentsReady', function () {
      var xhttp = new XMLHttpRequest();
      var params = "id=1&method=measurements&params[datasource]=msd16s";
      xhttp.open("POST", "http://metaviz.cbcb.umd.edu/api", true);

      //Send the proper header information along with the request
      xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

      xhttp.onreadystatechange = function () {//Call a function when the state changes.
        if (xhttp.readyState == 4 && xhttp.status == 200) {
          var response = JSON.parse(xhttp.response);
          var data = response.result;

          var fdata = [];

          // format response to array
          for (var i = 0; i < data.id.length; i++) {

            var tmp = {};
            tmp.id = data.id[i];
            tmp.sequencingType = data.sequencingType[i];
            tmp.name = data.name[i];
            tmp.annotation = data.annotation[i]
            // var annotations = Object.keys(data.annotation[i]);
            // annotations.forEach(function (anno) {
            //   tmp[anno] = data.annotation[i][anno];
            // });

            fdata.push(tmp);
          }

          var table = document.createElement("data-filter");
          document.getElementById("metaviz").appendChild(table);
          table.setAttribute("data", JSON.stringify(fdata));
        }
      }
      xhttp.send(params);
    });

  </script>

</body>

</html>